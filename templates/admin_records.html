{% extends "base.html" %}
{% block title %}Admin Records{% endblock %}
{% block content %}
<h2 class="mt-4">Admin Records</h2>

<h3 class="mt-4" style="color: #209675;">Single Card Recognition Records</h3>
<table class="table table-striped">
    <thead>
        <tr>
            <th>User Email</th>
            <th>Timestamp</th>
            <th>Success</th>
            <th>Card Owner</th>
            <th>Error Message</th>
        </tr>
    </thead>
    <tbody>
        {% for record, user in single_card_records %}
        <tr>
            <td>{{ user.email }}</td>
            <td>{{ record.timestamp }}</td>
            <td>{{ "Success" if record.success else "Failure" }}</td>
            <td>{{ record.card_owner or "N/A" }}</td>
            <td>{{ record.error_message or "N/A" }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3 class="mt-4" style="color: #209675;">Multi Card Recognition Records</h3>
<table class="table table-striped">
    <thead>
        <tr>
            <th>User Email</th>
            <th>Timestamp</th>
            <th>Success Count</th>
            <th>Failure Count</th>
            <th>Error Message</th>
        </tr>
    </thead>
    <tbody>
        {% for record, user in multi_card_records %}
        <tr>
            <td>{{ user.email }}</td>
            <td>{{ record.timestamp }}</td>
            <td>{{ record.success_count }}</td>
            <td>{{ record.failure_count }}</td>
            <td>{{ record.error_message or "N/A" }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3 class="mt-4" style="color: #209675;">Email Sending Records</h3>
<table class="table table-striped">
    <thead>
        <tr>
            <th>User Email</th>
            <th>Timestamp</th>
            <th>Success Count</th>
            <th>Failure Count</th>
            <th>Recipient Group</th>
            <th>Individual Recipient</th>
        </tr>
    </thead>
    <tbody>
        {% for record, user in email_records %}
        <tr>
            <td>{{ user.email }}</td>
            <td>{{ record.timestamp }}</td>
            <td>{{ record.success_count }}</td>
            <td>{{ record.failure_count }}</td>
            <td>{{ record.recipient_group or "N/A" }}</td>
            <td>{{ record.individual_recipient or "N/A" }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3 class="mt-4" style="color: #209675;">Excel Upload Records</h3>
<table class="table table-striped">
    <thead>
        <tr>
            <th>User Email</th>
            <th>Timestamp</th>
            <th>Success</th>
            <th>Filename</th>
            <th>Error Message</th>
        </tr>
    </thead>
    <tbody>
        {% for record, user in excel_upload_records %}
        <tr>
            <td>{{ user.email }}</td>
            <td>{{ record.timestamp }}</td>
            <td>{{ "Success" if record.success else "Failure" }}</td>
            <td>{{ record.filename }}</td>
            <td>{{ record.error_message or "N/A" }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}